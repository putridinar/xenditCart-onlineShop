---
permalink: /success
---
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Terima Kasih - Pesanan Anda Terkonfirmasi</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .spinner {
      width: 80px;
      height: 80px;
      border: 8px solid #f3f3f3;
      border-top: 8px solid #0d6efd;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 30px auto;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body class="d-flex flex-column justify-content-center align-items-center vh-100">

  <div id="statusBox" class="text-center">
    <div id="loading">
      <div class="spinner"></div>
      <h5>Mengirim konfirmasi ke admin...</h5>
    </div>
    <div id="success" style="display:none;">
      <h1 class="text-success mb-3">‚úÖ Terima Kasih!</h1>
      <p>Pesanan kamu berhasil dikirim ke admin.</p>
      <a href="/" class="btn btn-primary mt-3">Kembali ke Beranda</a>
    </div>
    <div id="failed" style="display:none;">
      <h1 class="text-danger mb-3">‚ùå Gagal Kirim!</h1>
      <p>Mohon periksa koneksi atau hubungi admin manual.</p>
      <a href="/" class="btn btn-secondary mt-3">Coba Lagi</a>
    </div>
  </div>

<script>
function sendTelegramOrder() {
    const cart = JSON.parse(localStorage.getItem("cart"));
    const status = localStorage.getItem("orderSent");
    const loading = document.getElementById('loading');
    const success = document.getElementById('success');
    const failed = document.getElementById('failed');

    if (!cart || cart.length === 0) {
        window.location.href = "/";  // Jika kosong, balik ke halaman utama
        return;
    }

    if (status === "sent") {
        loading.style.display = 'none';
        success.style.display = 'block';
        return;
    }

    const chat_id = "1903170022";
    const token = "5323538027:AAEKFXTpY40G1PKSrFsKzTDVeR4joDsXR9I";

    let pesan = `üõí <b>Konfirmasi Pesanan:</b>\n`;
    cart.forEach((item, index) => {
        pesan += `\n#${index + 1} ${item.name}\nWarna: ${item.color}\nUkuran: ${item.size}\nQty: ${item.quantity}\nHarga: Rp ${item.price.toLocaleString('id-ID')}\n`;
    });

    const url = `https://api.telegram.org/bot${token}/sendMessage?chat_id=${chat_id}&text=${encodeURIComponent(pesan)}&parse_mode=html`;

    fetch(url)
      .then(res => res.json())
      .then(response => {
        loading.style.display = 'none';
        if (response.ok) {
            success.style.display = 'block';
            localStorage.removeItem("cart");
            localStorage.setItem("orderSent", "sent");
        } else {
            failed.style.display = 'block';
            console.error("‚ùå Gagal kirim pesan:", response.description);
        }
      })
      .catch(err => {
        loading.style.display = 'none';
        failed.style.display = 'block';
        console.error("‚ùå Error:", err.message);
      });
}

document.addEventListener("DOMContentLoaded", sendTelegramOrder);
</script>


</body>
</html>
